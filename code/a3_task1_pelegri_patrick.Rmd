---
title: 'Task 1: PCA (PELEGRI)'
author: "Patrick Pelegri-O'Day"
date: "2/13/2022"
output: html_document
  code_folding: hide # fix to correct syntax
---

```{r setup, include=TRUE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)

library(tidyverse)
library(here)
library(ggfortify)
library(patchwork)
```

## Overview
A useful descriptive introductory summary (3 - 4 sentences) that helps the audience understand the data (include a citation as necessary) and what youâ€™ll be exploring

```{r read in data}

# Find NA values and describe my justification for dropping them / how many I'm dropping
env_df <- read_csv(here('data', 'world_env_vars.csv')) %>% 
  drop_na()


```

```{r create pca object}
env_pca <- env_df %>% 
  select(-Country) %>% # drop country because all variables for pca need to be numeric
  prcomp(scale = TRUE) # scale the variables so they're directly comparable

# rownames(env_pca) <- env_df$Country # I don't think this works for biplot

```

### biplot

```{r}
autoplot(env_pca,
         data = env_df,
         loadings = TRUE,
         loadings.label = TRUE, # show labels of original vectors
         loadings.colour = 'black',
         loadings.label.colour = 'black',
         loadings.label.vjust = -0.5) +
  scale_color_manual(values = c('darkslateblue', 'cornsilk4', 'orange4')) +
  theme_minimal()
```

```{r}
screeplot(env_pca, type = 'lines')
```




A brief summary (nicely formatted and professionally written bulletpoints are fine) highlighting some major takeaways from your PCA that can be gleaned from the biplot (and screeplot, if included) 
